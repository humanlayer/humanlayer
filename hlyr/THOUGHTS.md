# HumanLayer æ€ç¶­ç®¡ç†ç³»çµ±

HumanLayer æ€ç¶­ç³»çµ±å”åŠ©é–‹ç™¼è€…å°‡ç­†è¨˜ã€æ¶æ§‹æ±ºç­–å’Œé–‹ç™¼æ€è·¯èˆ‡ç¨‹å¼ç¢¼å„²å­˜åº«åˆ†é–‹ç®¡ç†ï¼ŒåŒæ™‚ä¿æŒèˆ‡é–‹ç™¼å·¥ä½œæµç¨‹çš„ç·Šå¯†æ•´åˆã€‚

## æ¦‚è¿°

æ€ç¶­ç³»çµ±æä¾›ï¼š

- ğŸ“ **ç¨ç«‹å„²å­˜** - å°‡æ€ç¶­ä¿å­˜åœ¨å°ˆç”¨çš„ git å„²å­˜åº«ä¸­
- ğŸ”— **ç„¡ç¸«æ•´åˆ** - å­˜å–æ€ç¶­å°±åƒå®ƒå€‘æ˜¯ç¨‹å¼ç¢¼å„²å­˜åº«çš„ä¸€éƒ¨åˆ†
- ğŸš« **é˜²æ­¢æ„å¤–** - æ°¸é ä¸æœƒæ„å¤–å°‡ç§äººæ€ç¶­æäº¤åˆ°ç¨‹å¼ç¢¼å„²å­˜åº«
- ğŸ¤– **AI å‹å–„** - çµæ§‹åŒ–è¨­è¨ˆï¼Œæ–¹ä¾¿ AI ç·¨ç¢¼åŠ©æ‰‹å­˜å–
- ğŸ‘¥ **åœ˜éšŠå”ä½œ** - åœ¨é©ç•¶æ™‚èˆ‡åœ˜éšŠåˆ†äº«æ€ç¶­

## å¿«é€Ÿé–‹å§‹

```bash
# Initialize thoughts for your current repository
humanlayer thoughts init

# Check the status of your thoughts
humanlayer thoughts status

# Manually sync thoughts (usually automatic)
humanlayer thoughts sync -m "Updated architecture notes"

# View or edit configuration
humanlayer thoughts config
humanlayer thoughts config --edit
```

## é‹ä½œåŸç†

### ç›®éŒ„çµæ§‹

åˆå§‹åŒ–å¾Œï¼Œæ‚¨çš„ç¨‹å¼ç¢¼å„²å­˜åº«å°‡åŒ…å«ï¼š

```
your-project/
â”œâ”€â”€ src/
â”œâ”€â”€ tests/
â”œâ”€â”€ thoughts/              # Added by thoughts system
â”‚   â”œâ”€â”€ alice/            # â†’ ~/thoughts/repos/your-project/alice
â”‚   â”œâ”€â”€ shared/           # â†’ ~/thoughts/repos/your-project/shared
â”‚   â”œâ”€â”€ global/           # â†’ ~/thoughts/global
â”‚   â”‚   â”œâ”€â”€ alice/        # Your cross-repo notes
â”‚   â”‚   â””â”€â”€ shared/       # Team cross-repo notes
â”‚   â”œâ”€â”€ searchable/       # Hard links for AI search (auto-generated)
â”‚   â”‚   â”œâ”€â”€ alice/        # Hard links to alice's files
â”‚   â”‚   â”œâ”€â”€ shared/       # Hard links to shared files
â”‚   â”‚   â””â”€â”€ global/       # Hard links to global files
â”‚   â””â”€â”€ CLAUDE.md         # Auto-generated context for AI
â””â”€â”€ .gitignore
```

æ‚¨çš„ä¸­å¤®æ€ç¶­å„²å­˜åº«ï¼š

```
~/thoughts/
â”œâ”€â”€ repos/
â”‚   â”œâ”€â”€ your-project/
â”‚   â”‚   â”œâ”€â”€ alice/
â”‚   â”‚   â””â”€â”€ shared/
â”‚   â””â”€â”€ another-project/
â”‚       â”œâ”€â”€ alice/
â”‚       â””â”€â”€ shared/
â””â”€â”€ global/
    â”œâ”€â”€ alice/
    â””â”€â”€ shared/
```

### è‡ªå‹•åŒæ­¥

ç³»çµ±æœƒåœ¨æ‚¨æäº¤ç¨‹å¼ç¢¼æ™‚è‡ªå‹•åŒæ­¥æ€ç¶­ï¼š

1. **Pre-commit æ›é‰¤** - é˜²æ­¢ thoughts/ è¢«æäº¤åˆ°ç¨‹å¼ç¢¼å„²å­˜åº«
2. **Post-commit æ›é‰¤** - å°‡æ€ç¶­è®Šæ›´åŒæ­¥åˆ°æ€ç¶­å„²å­˜åº«ï¼Œä¸¦æ›´æ–°å¯æœå°‹ç›®éŒ„

é€™æ„å‘³è‘—æ‚¨å¯ä»¥è‡ªç„¶åœ°å·¥ä½œ - åœ¨ç·¨è¼¯ç¨‹å¼ç¢¼çš„åŒæ™‚ç·¨è¼¯æ€ç¶­ï¼Œå®ƒå€‘æœƒè‡ªå‹•ä¿æŒåŒæ­¥ã€‚

### å¯æœå°‹ç›®éŒ„

`thoughts/searchable/` ç›®éŒ„åŒ…å«æ‰€æœ‰æ€ç¶­æª”æ¡ˆçš„å”¯è®€ç¡¬é€£çµã€‚é€™è®“ AI å·¥å…·å¯ä»¥æœå°‹æ€ç¶­å…§å®¹ï¼Œè€Œç„¡éœ€è¿½è¹¤ç¬¦è™Ÿé€£çµã€‚å¯æœå°‹ç›®éŒ„ï¼š

- åŸ·è¡Œ `humanlayer thoughts sync` æ™‚æœƒè‡ªå‹•æ›´æ–°
- åŒ…å«ç¡¬é€£çµï¼ˆè€Œéå‰¯æœ¬ï¼‰ä»¥ç¯€çœç£ç¢Ÿç©ºé–“
- ç‚ºå”¯è®€ç‹€æ…‹ä»¥é˜²æ­¢æ„å¤–ç·¨è¼¯
- ä¸æ‡‰ç›´æ¥ç·¨è¼¯ - è«‹å§‹çµ‚ç·¨è¼¯åŸå§‹æª”æ¡ˆ

## æŒ‡ä»¤

### `humanlayer thoughts init`

ç‚ºç›®å‰çš„å„²å­˜åº«åˆå§‹åŒ–æ€ç¶­ã€‚

```bash
humanlayer thoughts init [options]

Options:
  --force              Force reconfiguration even if already set up
  --config-file <path> Use a specific config file
```

**åŠŸèƒ½èªªæ˜ï¼š**

1. å¦‚æœ‰éœ€è¦ï¼Œå»ºç«‹æ€ç¶­è¨­å®š
2. å°‡æ‚¨çš„å„²å­˜åº«å°æ‡‰åˆ°æ€ç¶­ç›®éŒ„
3. è¨­å®šç¬¦è™Ÿé€£çµä»¥ä¾¿å­˜å–
4. å®‰è£ git æ›é‰¤ä»¥æä¾›ä¿è­·å’Œè‡ªå‹•åŒæ­¥
5. ç”¢ç”Ÿ CLAUDE.md ä¾› AI ä½¿ç”¨

### `humanlayer thoughts sync`

æ‰‹å‹•å°‡æ€ç¶­åŒæ­¥åˆ°æ€ç¶­å„²å­˜åº«ã€‚

```bash
humanlayer thoughts sync [options]

Options:
  -m, --message <msg>  Commit message for the sync
  --config-file <path> Use a specific config file
```

**æ³¨æ„ï¼š** é€šå¸¸æ‚¨ä¸éœ€è¦æ­¤æŒ‡ä»¤ - æ€ç¶­æœƒåœ¨æäº¤æ™‚è‡ªå‹•åŒæ­¥ï¼

### `humanlayer thoughts status`

æª¢æŸ¥æ€ç¶­è¨­å®šçš„ç‹€æ…‹ã€‚

```bash
humanlayer thoughts status [options]

Options:
  --config-file <path> Use a specific config file
```

é¡¯ç¤ºï¼š

- ç›®å‰è¨­å®š
- å„²å­˜åº«å°æ‡‰
- æ€ç¶­å„²å­˜åº«çš„ Git ç‹€æ…‹
- ä»»ä½•æœªæäº¤çš„è®Šæ›´

### `humanlayer thoughts config`

æª¢è¦–æˆ–ç·¨è¼¯æ€ç¶­è¨­å®šã€‚

```bash
humanlayer thoughts config [options]

Options:
  --edit               Open config in your $EDITOR
  --json               Output as JSON
  --config-file <path> Use a specific config file
```

## è¨­å®š

æ€ç¶­è¨­å®šå„²å­˜åœ¨æ‚¨çš„ HumanLayer è¨­å®šæª”ä¸­ï¼š

```json
{
  "api_key": "...",
  "thoughts": {
    "thoughtsRepo": "~/thoughts",
    "reposDir": "repos",
    "globalDir": "global",
    "user": "alice",
    "repoMappings": {
      "/Users/alice/projects/app": "app_thoughts",
      "/Users/alice/projects/api": "api_backend"
    }
  }
}
```

## æœ€ä½³å¯¦è¸

### æ€ç¶­ä¸­æ‡‰æ”¾å…¥ä»€éº¼

**å„²å­˜åº«ç‰¹å®šæ€ç¶­ (`thoughts/alice/`)ï¼š**

- æ­¤å°ˆæ¡ˆçš„æ¶æ§‹æ±ºç­–
- å¾…è¾¦äº‹é …æ¸…å–®å’Œè¦åŠƒç­†è¨˜
- èª¿æŸ¥çµæœå’Œé™¤éŒ¯ç­†è¨˜
- è¨­è¨ˆæ±ºç­–å’Œå–æ¨
- é—œæ–¼æ­¤å°ˆæ¡ˆçš„æœƒè­°è¨˜éŒ„

**å…¨åŸŸæ€ç¶­ (`thoughts/global/alice/`)ï¼š**

- å…¬å¸ç·¨ç¢¼æ¨™æº–
- å€‹äººé–‹ç™¼ç­†è¨˜
- è·¨å°ˆæ¡ˆæ¨¡å¼å’Œå·¥å…·
- åœ˜éšŠæµç¨‹å’Œå·¥ä½œæµç¨‹
- å­¸ç¿’ç­†è¨˜å’Œåƒè€ƒè³‡æ–™

### çµ„ç¹”æŠ€å·§

1. **ä½¿ç”¨ Markdown æª”æ¡ˆ** - AI åŠ©æ‰‹å¯ä»¥è¼•é¬†è®€å–å’Œç†è§£
2. **æ¸…æ¥šå‘½åæª”æ¡ˆ** - `architecture.md`ã€`todo.md`ã€`investigation-auth-bug.md`
3. **åœ¨æª”æ¡ˆä¹‹é–“å»ºç«‹é€£çµ** - ä½¿ç”¨ç›¸å°è·¯å¾‘é€£æ¥ç›¸é—œæ€ç¶­
4. **ç‚ºç­†è¨˜åŠ ä¸Šæ—¥æœŸ** - åœ¨èª¿æŸ¥å’Œæ±ºç­–æª”æ¡ˆä¸­åŠ å…¥æ—¥æœŸ
5. **å®šæœŸæ¸…ç†** - å°å­˜æˆ–åˆªé™¤éæ™‚çš„æ€ç¶­
6. **å¿«é€Ÿå­˜å–** - å¤§å¤šæ•¸ç­†è¨˜åªéœ€ä½¿ç”¨ `thoughts/yourname/`ï¼

### åœ˜éšŠå”ä½œ

- å°‡åœ˜éšŠç›¸é—œç­†è¨˜æ”¾åœ¨ `shared/` ç›®éŒ„ä¸­
- å€‹äººå¯¦é©—å’Œè‰ç¨¿æ”¾åœ¨æ‚¨çš„ä½¿ç”¨è€…ç›®éŒ„ä¸­
- è€ƒæ…®è®“åœ˜éšŠæˆå“¡å¯å­˜å–æ‚¨çš„æ€ç¶­å„²å­˜åº«
- åŒæ­¥å…±äº«æ€ç¶­æ™‚ä½¿ç”¨æ¸…æ¥šçš„æäº¤è¨Šæ¯

## ç–‘é›£æ’è§£

### "Thoughts not configured"ï¼ˆæ€ç¶­æœªè¨­å®šï¼‰

åŸ·è¡Œ `humanlayer thoughts init` é¦–æ¬¡è¨­å®šæ€ç¶­ã€‚

### "Not in a git repository"ï¼ˆä¸åœ¨ git å„²å­˜åº«ä¸­ï¼‰

æ€ç¶­ç³»çµ±éœ€è¦æ‚¨çš„ç¨‹å¼ç¢¼ä½æ–¼ git å„²å­˜åº«ä¸­ã€‚è«‹å…ˆåŸ·è¡Œ `git init`ã€‚

### åŒæ­¥å•é¡Œ

å¦‚æœè‡ªå‹•åŒæ­¥ç„¡æ³•é‹ä½œï¼š

1. æª¢æŸ¥ git æ›é‰¤æ˜¯å¦å·²å®‰è£ï¼š`ls -la .git/hooks/`
2. æ‰‹å‹•åŒæ­¥ï¼š`humanlayer thoughts sync`
3. æª¢æŸ¥æ€ç¶­å„²å­˜åº«ç‹€æ…‹ï¼š`humanlayer thoughts status`

### æ¬Šé™å•é¡Œ

ç¢ºä¿æ‚¨å°æ€ç¶­å„²å­˜åº«ä½ç½®å…·æœ‰å¯«å…¥æ¬Šé™ï¼ˆé è¨­ï¼š`~/thoughts`ï¼‰ã€‚

## é€²éšç”¨æ³•

### å¤šå°æ©Ÿå™¨

åœ¨å¤šå°æ©Ÿå™¨ä¸Šä½¿ç”¨æ€ç¶­ï¼š

1. å°‡æ€ç¶­å„²å­˜åº«æ¨é€åˆ°ç§äºº GitHub/GitLab å„²å­˜åº«
2. åœ¨å…¶ä»–æ©Ÿå™¨ä¸Šè¤‡è£½å®ƒ
3. æ›´æ–°è¨­å®šä»¥æŒ‡å‘è¤‡è£½çš„ä½ç½®

### Monorepos

å°æ–¼ monoreposï¼Œæ‚¨å¯ä»¥åœ¨æ ¹å±¤ç´šæˆ–å€‹åˆ¥å¥—ä»¶ä¸­åˆå§‹åŒ–æ€ç¶­ï¼š

```bash
# Root level (recommended)
cd /path/to/monorepo
humanlayer thoughts init

# Or per-package
cd /path/to/monorepo/packages/frontend
humanlayer thoughts init
```

### CI/CD æ•´åˆ

æ€ç¶­ç›®éŒ„å— pre-commit æ›é‰¤ä¿è­·ï¼Œé˜²æ­¢æ„å¤–æäº¤åˆ°ç¨‹å¼ç¢¼å„²å­˜åº«ã€‚é€™ç¢ºä¿äº†ä¹¾æ·¨çš„ CI/CD ç®¡ç·šï¼ŒåŒæ™‚ä¿æŒæ€ç¶­å¯ä¾›æœå°‹å’Œé–‹ç™¼ä½¿ç”¨ã€‚

## éš±ç§èˆ‡å®‰å…¨

- æ€ç¶­èˆ‡ç¨‹å¼ç¢¼åˆ†é–‹å„²å­˜
- æ°¸é ä¸æœƒæäº¤åˆ°ç¨‹å¼ç¢¼å„²å­˜åº«
- å¯å„²å­˜åœ¨ç§äºº git å„²å­˜åº«ä¸­
- æ¯å€‹ä½¿ç”¨è€…éƒ½æœ‰è‡ªå·±çš„ç§äººç›®éŒ„
- åœ˜éšŠåˆ†äº«é€é `shared/` ç›®éŒ„é¸æ“‡æ€§å•Ÿç”¨

## å¸¸è¦‹å•é¡Œ

**Q: æˆ‘å¯ä»¥åœ¨ä¸ä½¿ç”¨ HumanLayer å…¶ä»–åŠŸèƒ½çš„æƒ…æ³ä¸‹ä½¿ç”¨æ­¤ç³»çµ±å—ï¼Ÿ**
A: å¯ä»¥ï¼æ€ç¶­ç³»çµ±ç¨ç«‹æ–¼ HumanLayer çš„æ ¸å‡†å’Œé€šè¨ŠåŠŸèƒ½ã€‚

**Q: å¦‚æœæˆ‘ä¸å°å¿ƒåˆªé™¤äº†æ€ç¶­æ€éº¼è¾¦ï¼Ÿ**
A: ç”±æ–¼æ€ç¶­ä½æ–¼ git å„²å­˜åº«ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `git restore` æˆ– `git checkout` å¾©åŸå®ƒå€‘ã€‚

**Q: æˆ‘å¯ä»¥åˆ†äº«éƒ¨åˆ†æ€ç¶­è€Œä¸åˆ†äº«å…¶ä»–æ€ç¶­å—ï¼Ÿ**
A: å¯ä»¥ï¼å°‡å¯åˆ†äº«çš„æ€ç¶­æ”¾åœ¨ `shared/` ç›®éŒ„ä¸­ï¼Œå°‡ç§äººæ€ç¶­ä¿ç•™åœ¨æ‚¨çš„ä½¿ç”¨è€…ç›®éŒ„ä¸­ã€‚

**Q: å¦‚ä½•å°å­˜èˆŠæ€ç¶­ï¼Ÿ**
A: åœ¨æ€ç¶­ä¸­å»ºç«‹ `archive/` ç›®éŒ„ä¸¦å°‡èˆŠæª”æ¡ˆç§»è‡³è©²è™•ï¼Œæˆ–åˆªé™¤å®ƒå€‘ï¼ˆgit æœƒä¿ç•™æ­·å²è¨˜éŒ„ï¼‰ã€‚

**Q: æˆ‘å¯ä»¥ç‚ºä¸åŒå°ˆæ¡ˆä½¿ç”¨ä¸åŒçš„æ€ç¶­å„²å­˜åº«å—ï¼Ÿ**
A: ç›®å‰æ‰€æœ‰å°ˆæ¡ˆå…±äº«åŒä¸€å€‹æ€ç¶­å„²å­˜åº«ï¼Œä½†ä½¿ç”¨ä¸åŒçš„å­ç›®éŒ„ã€‚

**Q: ç‚ºä»€éº¼æˆ‘ä¸èƒ½ä½¿ç”¨ "global" ä½œç‚ºä½¿ç”¨è€…åç¨±ï¼Ÿ**
A: "global" ä¿ç•™ç”¨æ–¼è·¨å°ˆæ¡ˆæ€ç¶­ã€‚é€™ç¢ºä¿ç›®éŒ„çµæ§‹ä¿æŒæ¸…æ™°ã€‚

**Q: ç‚ºä»€éº¼éœ€è¦å¯æœå°‹ç›®éŒ„ï¼Ÿ**
A: è¨±å¤šæœå°‹å·¥å…·é è¨­ä¸æœƒè¿½è¹¤ç¬¦è™Ÿé€£çµã€‚å¯æœå°‹ç›®éŒ„åŒ…å«æ‰€æœ‰æ€ç¶­æª”æ¡ˆçš„ç¡¬é€£çµï¼Œä½¿ AI åŠ©æ‰‹å’Œå…¶ä»–å·¥å…·å¯ä»¥è¼•é¬†æœå°‹å®ƒå€‘ã€‚

**Q: æˆ‘å¯ä»¥ç·¨è¼¯å¯æœå°‹ç›®éŒ„ä¸­çš„æª”æ¡ˆå—ï¼Ÿ**
A: ä¸å¯ä»¥ï¼Œsearchable/ ä¸­çš„æª”æ¡ˆç‚ºå”¯è®€ã€‚è«‹å§‹çµ‚ç·¨è¼¯åŸå§‹æª”æ¡ˆï¼ˆä¾‹å¦‚ï¼Œç·¨è¼¯ thoughts/alice/todo.mdï¼Œè€Œé thoughts/searchable/alice/todo.mdï¼‰ã€‚

## è²¢ç»

æ€ç¶­ç³»çµ±æ˜¯ HumanLayer çš„ä¸€éƒ¨åˆ†ã€‚è‹¥è¦è²¢ç»ï¼š

1. æŸ¥çœ‹ `hlyr/src/commands/thoughts/` ä¸­çš„å¯¦ä½œ
2. é–±è®€ `thoughts.md` ä¸­çš„åŸå§‹è¦æ ¼
3. æäº¤ PR ä»¥æ”¹é€²æ€ç¶­ç³»çµ±

---

ç¥æ‚¨æ€è€ƒæ„‰å¿«ï¼ğŸ§ âœ¨
